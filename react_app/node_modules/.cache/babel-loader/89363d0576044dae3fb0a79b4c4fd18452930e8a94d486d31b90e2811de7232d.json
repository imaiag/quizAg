{"ast":null,"code":"import{useState}from\"react\";import'./App.css';import{quizData}from\"./quizData\";import html2canvas from\"html2canvas\";import jsPDF from\"jspdf\";//bootstrap\nimport'bootstrap/dist/css/bootstrap.min.css';import Button from'react-bootstrap/Button';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){//State管理\nconst[currentQuestion,setCurrentQuestion]=useState(0);const[next,setNext]=useState(false);const[answer,setAnswer]=useState([]);const[score,setScore]=useState(0);const[feedback,setFeedback]=useState(null);const[showScore,setShowScore]=useState(false);//データをすべて初期化する関数\nconst goToFirstQuestion=()=>{setCurrentQuestion(0);setNext(false);setAnswer([]);setScore(0);setFeedback(null);setShowScore(false);};//解答レポートをpdfにする関数\nfunction downloadPDF(){const element=document.getElementById(\"pdf-content\");// PDF化したい要素のIDを指定\nif(!element){console.error(\"Element not found\");return;}//pdfの様式指定\nhtml2canvas(element).then(canvas=>{const imgData=canvas.toDataURL(\"image/png\");// キャプチャした要素を画像データとして取得\nconst pdf=new jsPDF(\"p\",\"mm\",\"a4\");// A4サイズに合わせて画像を縮小\nconst pdfWidth=pdf.internal.pageSize.getWidth();const pdfHeight=canvas.height*pdfWidth/canvas.width;pdf.addImage(imgData,\"PNG\",0,0,pdfWidth,pdfHeight);pdf.save(\"download.pdf\");// ファイル名を指定してダウンロード\n});}//次の質問に移動する関数\nconst goToNextQuestion=()=>{const nextQuestion=currentQuestion+1;if(nextQuestion<quizData.length){setCurrentQuestion(nextQuestion);}else{setShowScore(true);}setNext(false);setFeedback(null);};//答え合わせをする関数\nconst handleAnswer=answer=>{const newAnswer={question:quizData[currentQuestion].question,answer:answer,rightanswer:quizData[currentQuestion].correct,correct:quizData[currentQuestion].correct===answer};// correct\nif(newAnswer.correct){setScore(prevScore=>prevScore+1);setFeedback(\"正解です\");}else{setFeedback(\"不正解です\");}// スプレッド構文。...は空の構文を展開する。newAnswerでオブジェクトを追加する。\n// setAnswer([...answer,newAnswer]);\nsetAnswer(prevAnswer=>[...prevAnswer,newAnswer]);setNext(true);};return/*#__PURE__*/_jsx(\"div\",{className:\"quiz-container\",children:showScore?/*#__PURE__*/_jsxs(\"div\",{className:\"score-section\",children:[/*#__PURE__*/_jsxs(\"scope\",{id:\"pdf-content\",children:[\"  \",/*#__PURE__*/_jsx(\"h1\",{children:\"\\u30B9\\u30B3\\u30A2\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[score,\"/\",quizData.length]}),/*#__PURE__*/_jsxs(\"table\",{className:\"answer-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u8CEA\\u554F\"}),/*#__PURE__*/_jsx(\"td\",{children:\"\\u3042\\u306A\\u305F\\u306E\\u89E3\\u7B54\"}),/*#__PURE__*/_jsx(\"td\",{children:\"\\u6B63\\u89E3\"}),/*#__PURE__*/_jsx(\"td\",{children:\"\\u5408\\u5426\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:answer.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:item.correct?'correct':'wrong',children:[/*#__PURE__*/_jsx(\"td\",{children:item.question}),/*#__PURE__*/_jsx(\"td\",{children:item.answer}),/*#__PURE__*/_jsx(\"td\",{children:item.rightanswer}),/*#__PURE__*/_jsx(\"td\",{children:item.correct?'OK':'NG'})]}))})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"my-primary-button\",onClick:goToFirstQuestion,children:\"\\u6700\\u521D\\u304B\\u3089\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"my-primary-button\",onClick:downloadPDF,children:\"\\u30EC\\u30DD\\u30FC\\u30C8\\u4F5C\\u6210\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"question-section\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\u554F\\u984C \",currentQuestion+1,\" / \",quizData.length]}),/*#__PURE__*/_jsx(\"h2\",{children:quizData[currentQuestion].question}),next?/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"large-feedback\",children:feedback}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u89E3\\u7B54\"}),/*#__PURE__*/_jsx(\"p\",{className:\"answe-data\",children:quizData[currentQuestion].correct}),/*#__PURE__*/_jsx(Button,{onClick:goToNextQuestion,children:\"\\u6B21\\u306E\\u554F\\u984C\\u3078\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"answer-section\",children:quizData[currentQuestion].options.map(item=>/*#__PURE__*/_jsx(Button,{onClick:()=>handleAnswer(item),className:\"quiz-option-button\",size:\"lg\",children:item},item))})]})});}export default App;","map":{"version":3,"names":["useState","quizData","html2canvas","jsPDF","Button","jsx","_jsx","jsxs","_jsxs","App","currentQuestion","setCurrentQuestion","next","setNext","answer","setAnswer","score","setScore","feedback","setFeedback","showScore","setShowScore","goToFirstQuestion","downloadPDF","element","document","getElementById","console","error","then","canvas","imgData","toDataURL","pdf","pdfWidth","internal","pageSize","getWidth","pdfHeight","height","width","addImage","save","goToNextQuestion","nextQuestion","length","handleAnswer","newAnswer","question","rightanswer","correct","prevScore","prevAnswer","className","children","id","map","item","variant","onClick","options","size"],"sources":["/Users/imaikenta/Desktop/agdev/agquiz/react_app/src/App.js"],"sourcesContent":["import {useState} from \"react\";\nimport './App.css';\nimport { quizData } from \"./quizData\";\nimport html2canvas from \"html2canvas\";\nimport jsPDF from \"jspdf\";\n\n//bootstrap\nimport 'bootstrap/dist/css/bootstrap.min.css'; \nimport Button from 'react-bootstrap/Button'; \n\nfunction App() {\n  //State管理\n  const[currentQuestion,setCurrentQuestion] = useState(0);\n  const[next,setNext] = useState(false);\n  const[answer,setAnswer] = useState([]);\n  const[score,setScore] = useState(0);\n  const[feedback,setFeedback] = useState(null);\n  const[showScore,setShowScore] = useState(false);\n\n  //データをすべて初期化する関数\n  const goToFirstQuestion = () => {\n    setCurrentQuestion(0);\n    setNext(false);\n    setAnswer([]);\n    setScore(0);\n    setFeedback(null);\n    setShowScore(false);\n  };\n\n  //解答レポートをpdfにする関数\n  function downloadPDF() {\n    const element = document.getElementById(\"pdf-content\"); // PDF化したい要素のIDを指定\n    if (!element) {\n      console.error(\"Element not found\");\n      return;\n    }\n    //pdfの様式指定\n    html2canvas(element).then((canvas) => {\n      const imgData = canvas.toDataURL(\"image/png\"); // キャプチャした要素を画像データとして取得\n      const pdf = new jsPDF(\"p\", \"mm\", \"a4\");\n      // A4サイズに合わせて画像を縮小\n      const pdfWidth = pdf.internal.pageSize.getWidth();\n      const pdfHeight = (canvas.height * pdfWidth) / canvas.width;\n      pdf.addImage(imgData, \"PNG\", 0, 0, pdfWidth, pdfHeight);\n      pdf.save(\"download.pdf\"); // ファイル名を指定してダウンロード\n    });\n  }\n\n  //次の質問に移動する関数\n  const goToNextQuestion = () => {\n    const nextQuestion = currentQuestion + 1;\n    if (nextQuestion < quizData.length) {\n      setCurrentQuestion(nextQuestion);\n    } else {\n      setShowScore(true);\n    }\n    setNext(false);\n    setFeedback(null);\n  };\n\n  //答え合わせをする関数\n  const handleAnswer = (answer) =>{\n    const newAnswer = {\n        question: quizData[currentQuestion].question,\n        answer: answer,\n        rightanswer: quizData[currentQuestion].correct,\n        correct: quizData[currentQuestion].correct=== answer,\n    };\n    // correct\n    if(newAnswer.correct){\n      setScore((prevScore) => prevScore + 1);\n      setFeedback(\"正解です\");\n    }else{\n      setFeedback(\"不正解です\");\n    }\n\n\n    // スプレッド構文。...は空の構文を展開する。newAnswerでオブジェクトを追加する。\n    // setAnswer([...answer,newAnswer]);\n    setAnswer((prevAnswer) => [...prevAnswer, newAnswer]);\n    setNext(true);\n  }\n\n\n  return (\n      <div className='quiz-container'>\n        {showScore ? (\n          <div className=\"score-section\">\n            <scope id=\"pdf-content\">  {/* pdfの範囲 */}\n              <h1>スコア</h1>\n              <h2>{score}/{quizData.length}</h2>\n              <table className=\"answer-table\">\n                <thead>\n                  <tr>\n                    <td>質問</td>\n                    <td>あなたの解答</td>\n                    <td>正解</td>\n                    <td>合否</td>\n                  </tr>\n                </thead>\n                <tbody>\n                  {answer.map((item) => (\n                    <tr className={item.correct ? 'correct' : 'wrong'}>\n                      <td>{item.question}</td>\n                      <td>{item.answer}</td>\n                      <td>{item.rightanswer}</td>\n                      <td>{item.correct ? 'OK' : 'NG'}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </scope>\n            <Button variant=\"primary\" className=\"my-primary-button\" \n            onClick={goToFirstQuestion}>\n              最初から\n            </Button>\n            <Button variant=\"primary\" className=\"my-primary-button\" \n            onClick={downloadPDF}>\n              レポート作成\n            </Button>\n          </div>\n        ) : (\n      <div className='question-section'>\n        <h1>問題 {currentQuestion+1} / {quizData.length}</h1>\n        <h2>{quizData[currentQuestion].question}</h2>\n        {next ? (\n          <div className=\"feedback-section\">\n            <h2 className=\"large-feedback\">{feedback}</h2>\n            <p>解答</p>\n            <p className=\"answe-data\">{quizData[currentQuestion].correct}</p>\n            <Button onClick= {goToNextQuestion}>次の問題へ</Button>\n          </div>\n        ) : (\n        <div className=\"answer-section\">\n          {quizData[currentQuestion].options.map((item) => (\n            <Button\n            key={item}        \n            onClick={() => handleAnswer(item)} \n            className=\"quiz-option-button\"\n            size=\"lg\"\n            >\n            {item}\n            </Button>\n          ))}\n        </div>\n        )}\n      </div>\n    )}\n      </div>\n  );\n}\n\nexport default App;"],"mappings":"AAAA,OAAQA,QAAQ,KAAO,OAAO,CAC9B,MAAO,WAAW,CAClB,OAASC,QAAQ,KAAQ,YAAY,CACrC,MAAO,CAAAC,WAAW,KAAM,aAAa,CACrC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB;AACA,MAAO,sCAAsC,CAC7C,MAAO,CAAAC,MAAM,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb;AACA,KAAK,CAACC,eAAe,CAACC,kBAAkB,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CACvD,KAAK,CAACY,IAAI,CAACC,OAAO,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACrC,KAAK,CAACc,MAAM,CAACC,SAAS,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAK,CAACgB,KAAK,CAACC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAK,CAACkB,QAAQ,CAACC,WAAW,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAK,CAACoB,SAAS,CAACC,YAAY,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAE/C;AACA,KAAM,CAAAsB,iBAAiB,CAAGA,CAAA,GAAM,CAC9BX,kBAAkB,CAAC,CAAC,CAAC,CACrBE,OAAO,CAAC,KAAK,CAAC,CACdE,SAAS,CAAC,EAAE,CAAC,CACbE,QAAQ,CAAC,CAAC,CAAC,CACXE,WAAW,CAAC,IAAI,CAAC,CACjBE,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAED;AACA,QAAS,CAAAE,WAAWA,CAAA,CAAG,CACrB,KAAM,CAAAC,OAAO,CAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAAE;AACxD,GAAI,CAACF,OAAO,CAAE,CACZG,OAAO,CAACC,KAAK,CAAC,mBAAmB,CAAC,CAClC,OACF,CACA;AACA1B,WAAW,CAACsB,OAAO,CAAC,CAACK,IAAI,CAAEC,MAAM,EAAK,CACpC,KAAM,CAAAC,OAAO,CAAGD,MAAM,CAACE,SAAS,CAAC,WAAW,CAAC,CAAE;AAC/C,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAA9B,KAAK,CAAC,GAAG,CAAE,IAAI,CAAE,IAAI,CAAC,CACtC;AACA,KAAM,CAAA+B,QAAQ,CAAGD,GAAG,CAACE,QAAQ,CAACC,QAAQ,CAACC,QAAQ,CAAC,CAAC,CACjD,KAAM,CAAAC,SAAS,CAAIR,MAAM,CAACS,MAAM,CAAGL,QAAQ,CAAIJ,MAAM,CAACU,KAAK,CAC3DP,GAAG,CAACQ,QAAQ,CAACV,OAAO,CAAE,KAAK,CAAE,CAAC,CAAE,CAAC,CAAEG,QAAQ,CAAEI,SAAS,CAAC,CACvDL,GAAG,CAACS,IAAI,CAAC,cAAc,CAAC,CAAE;AAC5B,CAAC,CAAC,CACJ,CAEA;AACA,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAAAC,YAAY,CAAGlC,eAAe,CAAG,CAAC,CACxC,GAAIkC,YAAY,CAAG3C,QAAQ,CAAC4C,MAAM,CAAE,CAClClC,kBAAkB,CAACiC,YAAY,CAAC,CAClC,CAAC,IAAM,CACLvB,YAAY,CAAC,IAAI,CAAC,CACpB,CACAR,OAAO,CAAC,KAAK,CAAC,CACdM,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAAA2B,YAAY,CAAIhC,MAAM,EAAI,CAC9B,KAAM,CAAAiC,SAAS,CAAG,CACdC,QAAQ,CAAE/C,QAAQ,CAACS,eAAe,CAAC,CAACsC,QAAQ,CAC5ClC,MAAM,CAAEA,MAAM,CACdmC,WAAW,CAAEhD,QAAQ,CAACS,eAAe,CAAC,CAACwC,OAAO,CAC9CA,OAAO,CAAEjD,QAAQ,CAACS,eAAe,CAAC,CAACwC,OAAO,GAAIpC,MAClD,CAAC,CACD;AACA,GAAGiC,SAAS,CAACG,OAAO,CAAC,CACnBjC,QAAQ,CAAEkC,SAAS,EAAKA,SAAS,CAAG,CAAC,CAAC,CACtChC,WAAW,CAAC,MAAM,CAAC,CACrB,CAAC,IAAI,CACHA,WAAW,CAAC,OAAO,CAAC,CACtB,CAGA;AACA;AACAJ,SAAS,CAAEqC,UAAU,EAAK,CAAC,GAAGA,UAAU,CAAEL,SAAS,CAAC,CAAC,CACrDlC,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAGD,mBACIP,IAAA,QAAK+C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BlC,SAAS,cACRZ,KAAA,QAAK6C,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B9C,KAAA,UAAO+C,EAAE,CAAC,aAAa,CAAAD,QAAA,EAAC,IAAE,cACxBhD,IAAA,OAAAgD,QAAA,CAAI,oBAAG,CAAI,CAAC,cACZ9C,KAAA,OAAA8C,QAAA,EAAKtC,KAAK,CAAC,GAAC,CAACf,QAAQ,CAAC4C,MAAM,EAAK,CAAC,cAClCrC,KAAA,UAAO6C,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC7BhD,IAAA,UAAAgD,QAAA,cACE9C,KAAA,OAAA8C,QAAA,eACEhD,IAAA,OAAAgD,QAAA,CAAI,cAAE,CAAI,CAAC,cACXhD,IAAA,OAAAgD,QAAA,CAAI,sCAAM,CAAI,CAAC,cACfhD,IAAA,OAAAgD,QAAA,CAAI,cAAE,CAAI,CAAC,cACXhD,IAAA,OAAAgD,QAAA,CAAI,cAAE,CAAI,CAAC,EACT,CAAC,CACA,CAAC,cACRhD,IAAA,UAAAgD,QAAA,CACGxC,MAAM,CAAC0C,GAAG,CAAEC,IAAI,eACfjD,KAAA,OAAI6C,SAAS,CAAEI,IAAI,CAACP,OAAO,CAAG,SAAS,CAAG,OAAQ,CAAAI,QAAA,eAChDhD,IAAA,OAAAgD,QAAA,CAAKG,IAAI,CAACT,QAAQ,CAAK,CAAC,cACxB1C,IAAA,OAAAgD,QAAA,CAAKG,IAAI,CAAC3C,MAAM,CAAK,CAAC,cACtBR,IAAA,OAAAgD,QAAA,CAAKG,IAAI,CAACR,WAAW,CAAK,CAAC,cAC3B3C,IAAA,OAAAgD,QAAA,CAAKG,IAAI,CAACP,OAAO,CAAG,IAAI,CAAG,IAAI,CAAK,CAAC,EACnC,CACL,CAAC,CACG,CAAC,EACH,CAAC,EACH,CAAC,cACR5C,IAAA,CAACF,MAAM,EAACsD,OAAO,CAAC,SAAS,CAACL,SAAS,CAAC,mBAAmB,CACvDM,OAAO,CAAErC,iBAAkB,CAAAgC,QAAA,CAAC,0BAE5B,CAAQ,CAAC,cACThD,IAAA,CAACF,MAAM,EAACsD,OAAO,CAAC,SAAS,CAACL,SAAS,CAAC,mBAAmB,CACvDM,OAAO,CAAEpC,WAAY,CAAA+B,QAAA,CAAC,sCAEtB,CAAQ,CAAC,EACN,CAAC,cAEV9C,KAAA,QAAK6C,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B9C,KAAA,OAAA8C,QAAA,EAAI,eAAG,CAAC5C,eAAe,CAAC,CAAC,CAAC,KAAG,CAACT,QAAQ,CAAC4C,MAAM,EAAK,CAAC,cACnDvC,IAAA,OAAAgD,QAAA,CAAKrD,QAAQ,CAACS,eAAe,CAAC,CAACsC,QAAQ,CAAK,CAAC,CAC5CpC,IAAI,cACHJ,KAAA,QAAK6C,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BhD,IAAA,OAAI+C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAEpC,QAAQ,CAAK,CAAC,cAC9CZ,IAAA,MAAAgD,QAAA,CAAG,cAAE,CAAG,CAAC,cACThD,IAAA,MAAG+C,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAErD,QAAQ,CAACS,eAAe,CAAC,CAACwC,OAAO,CAAI,CAAC,cACjE5C,IAAA,CAACF,MAAM,EAACuD,OAAO,CAAGhB,gBAAiB,CAAAW,QAAA,CAAC,gCAAK,CAAQ,CAAC,EAC/C,CAAC,cAERhD,IAAA,QAAK+C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BrD,QAAQ,CAACS,eAAe,CAAC,CAACkD,OAAO,CAACJ,GAAG,CAAEC,IAAI,eAC1CnD,IAAA,CAACF,MAAM,EAEPuD,OAAO,CAAEA,CAAA,GAAMb,YAAY,CAACW,IAAI,CAAE,CAClCJ,SAAS,CAAC,oBAAoB,CAC9BQ,IAAI,CAAC,IAAI,CAAAP,QAAA,CAERG,IAAI,EALAA,IAMG,CACT,CAAC,CACC,CACJ,EACE,CACN,CACM,CAAC,CAEZ,CAEA,cAAe,CAAAhD,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}